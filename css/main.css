/* ========== UNIFIED ROOT / GLOBAL VARIABLES ========== */
:root{
  /* Colors & accents */
  --bg-deep: #030406;
  --bg-gradient: linear-gradient(180deg,#000,#111);
  --bg: var(--bg-gradient);
  --text: #d7d7d7;
  --neon-cyan: #00f2ff;
  --neon-purple: #bd00ff;
  --neon-gold: #ffd700;
  --neon-danger: #ff2a6d;
  --neon-success: #00ff9d;

  /* UI fonts */
  --font-ui: 'Montserrat', sans-serif;
  --font-code: 'JetBrains Mono', monospace;

  /* Glass / card */
  --glass-surface: rgba(18,18,22,0.65);
  --glass-border: rgba(255,255,255,0.06);
  --card-bg: rgba(255,255,255,0.03);
  --glass: rgba(255,255,255,0.04);

  /* Gradients used by chips/list markers */
  --grad-a: #7effa1;
  --grad-b: #67e6ff;

  /* misc helper variables referenced in components */
  --panel: #0e1220;
  --ink: #e8ecf6;
  --txt-card: color-mix(in oklab, var(--panel) 92%, black);
  --chip-bg: linear-gradient(42deg, var(--grad-a), var(--grad-b));

  /* Timings & easings */
  --ease-overshoot: cubic-bezier(0.34, 1.3, 0.64, 1);
  --ease-smooth: cubic-bezier(0.23, 1, 0.32, 1);
  --fast: .25s; --med: .6s; --slow: 1.2s;

  /* z-index helpers */
  --z-base: 0;
  --z-content: 100;
  --z-widget: 500;
  --z-overlay: 1000;
  --z-system: 5000;
}

/* ========== RESET / BASE ========== */
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;outline:none;user-select:none}
html,body{height:100%;margin:0;font-family:var(--font-ui),system-ui,-apple-system; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased}
.activation-pre, .cyber-input, input, textarea, .toaster, .response-block p { user-select:text !important; -webkit-user-select:text !important; }

/* subtle grid background */
body{
  min-height:100dvh;
  
  overflow:auto;
  
}

/* ========== AMBIENT BLOBS ========== */
.ambient-light{position:fixed;inset:0;z-index:var(--z-base);pointer-events:none}
.blob{position:absolute;border-radius:50%;filter:blur(100px);opacity:0.14;animation:float 25s infinite alternate ease-in-out}
.blob-1{width:60vw;height:60vw;background:var(--neon-cyan);top:-20%;left:-20%}
.blob-2{width:50vw;height:50vw;background:var(--neon-purple);bottom:-20%;right:-20%;animation-delay:-5s}

/* ========== KEYFRAMES ========== */
@keyframes float{0%{transform:translate(0,0)}100%{transform:translate(40px,60px)}}
@keyframes gradientFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.02)}}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes clickPulse{0%,100%{opacity:1}50%{opacity:0.8}}

/* ========== SNAP ZONE ========== */
#snap-zone {
  position: fixed; top: 0; left: 0; right: 0; height: 80px;
  background: linear-gradient(to bottom, rgba(0, 242, 255, 0.25), transparent);
  opacity: 0; pointer-events: none; transition: opacity 0.3s ease; z-index:9000;
  box-shadow: 0 0 40px rgba(0, 242, 255, 0.1);
}
#snap-zone.active{opacity:1}

/* ========== CENTRAL CONTAINER & FUSION CARD ========== */
.container{position:absolute;inset:0;pointer-events:none;display:flex;align-items:center;justify-content:center;perspective:1200px;z-index:10}
.fusion-card{
  pointer-events:auto;
  width:100%; max-width:440px;
  max-height:85vh; overflow-y:auto; overflow-x:hidden;
  background:var(--glass-surface); backdrop-filter:blur(30px); -webkit-backdrop-filter:blur(30px);
  border:1px solid var(--glass-border); border-radius:36px; padding:30px 25px;
  box-shadow:0 40px 100px rgba(0,0,0,0.8);
  position:relative; opacity:0; transform:translateY(50px) scale(0.96);
  display:flex; flex-direction:column; gap:8px;
  transition: width 0.5s var(--ease-smooth), height 0.5s var(--ease-smooth), border-radius 0.5s var(--ease-smooth), opacity 0.4s, left 0.4s var(--ease-smooth), top 0.4s var(--ease-smooth), box-shadow 0.4s;
  will-change: transform, width, height, border-radius, left, top;
  touch-action: pan-y;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  scrollbar-width: none;
}
.fusion-card::-webkit-scrollbar{display:none}
.fusion-card.active{opacity:1;transform:translateY(0) scale(1)}
.fusion-card.closed{width:260px;padding:14px 16px;border-radius:22px}
.fusion-card.closed .card-body{display:none}

/* ========== ORB STATE ========== */
.fusion-card.orb{
  position:fixed !important;
  width:68px !important;height:68px !important;
  padding:0 !important;border-radius:50% !important;
  align-items:center;justify-content:center;
  box-shadow:0 15px 40px rgba(0,0,0,0.6), 0 0 20px rgba(0,242,255,0.2);
  z-index:9999; cursor:grab; touch-action:none; overflow:visible;
}
.fusion-card.orb:active{cursor:grabbing;transform:scale(0.95)}
.fusion-card.orb .text-block, .fusion-card.orb .clock-widget, .fusion-card.orb .card-body, .fusion-card.orb .small-preview{display:none !important}
.fusion-card.orb .card-header{margin:0;width:100%;height:100%;justify-content:center;padding:0}
.fusion-card.orb .avatar-slot{width:54px;height:54px;border-radius:50%;margin:0;opacity:1;pointer-events:none}

/* orb quick menu */
.orb-menu-trigger{
  position:absolute;bottom:-30px;left:50%;transform:translateX(-50%);
  width:24px;height:24px;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.2);
  border-radius:50%;display:none;align-items:center;justify-content:center;cursor:pointer;
  color:#fff;font-size:12px;pointer-events:auto;backdrop-filter:blur(4px);
}
.fusion-card.orb:hover .orb-menu-trigger{display:flex}

/* ========== HUD STATE ========== */
.fusion-card.hud{
  position:fixed !important; top:0 !important; left:50% !important;
  transform:translateX(-50%) !important;
  width:96% !important; max-width:600px !important; height:64px !important;
  padding:0 16px !important; border-radius:0 0 24px 24px !important;
  flex-direction:row; align-items:center; justify-content:space-between;
  box-shadow:0 10px 40px rgba(0,0,0,0.7); z-index:9999; overflow:visible;
  border-top:none; opacity:0.78; touch-action:none;
}
.fusion-card.hud .card-body, .fusion-card.hud .small-preview{display:none !important}
.fusion-card.hud .card-header{margin:0;width:100%;justify-content:space-between}
.fusion-card.hud .avatar-slot{width:40px;height:40px}
.fusion-card.hud .brand-dual{font-size:1.2rem;margin:0}
.fusion-card.hud .greeting-row{display:none}
.fusion-card.hud .text-block{flex:unset}

/* drag handle for hud */
.drag-handle{
  width:60px;height:5px;background:rgba(255,255,255,0.15);border-radius:10px;
  position:absolute;bottom:8px;left:50%;transform:translateX(-50%);display:none;cursor:grab;pointer-events:none;
  transition:background 0.3s;
}
.fusion-card.hud:active .drag-handle{background:var(--neon-cyan);width:70px}
.fusion-card.hud .drag-handle{display:block}

/* hud menu btn */
.hud-menu-btn{display:none;background:transparent;border:none;color:rgba(255,255,255,0.6);cursor:pointer}
.fusion-card.hud .hud-menu-btn{display:block}

/* ========== HEADER / AVATAR / TEXT BLOCKS ========== */
.card-header{display:flex;align-items:center;gap:15px;margin-bottom:18px;width:100%;cursor:pointer;touch-action:none}
.avatar-slot{width:64px;height:64px;border-radius:18px;overflow:hidden;opacity:0;transition:opacity 0.35s}
.avatar-slot.shown{opacity:1}
.text-block{flex:1;display:flex;flex-direction:column;justify-content:center}
.greeting-row{font-size:1.5rem;line-height:1;display:flex;align-items:baseline;gap:6px;flex-wrap:wrap}
.txt-thin{font-weight:200;color:rgba(255,255,255,0.7)}
.txt-heavy{font-weight:600;color:#fff}

/* brand gradient */
.brand-dual{
  font-size:2.2rem;font-weight:900;line-height:0.95;text-transform:uppercase;letter-spacing:-2px;margin-top:4px;
  background:linear-gradient(-45deg,#fff,var(--neon-cyan),var(--neon-purple),#fff);
  background-size:300%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:gradientFlow 4s ease infinite;
}

/* clock & status */
.clock-widget{text-align:right}
.time-display{font-family:var(--font-code);font-size:1rem;color:rgba(255,255,255,0.5);font-weight:700}
.status-led{font-size:0.6rem;color:var(--neon-cyan);text-transform:uppercase;letter-spacing:1px;margin-top:4px;display:block}

/* ========== SMALL PREVIEW / COLLAPSE ========== */
.small-preview{display:none;align-items:center;gap:10px;margin-top:8px;padding:8px 10px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-family:var(--font-code);font-size:0.86rem;color:rgba(255,255,255,0.9);cursor:pointer}
.small-preview .mini-avatar{width:30px;height:30px;border-radius:6px;flex-shrink:0;overflow:hidden;display:inline-flex;align-items:center;justify-content:center}
.small-preview .small-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 110px)}
.small-preview .ident-badge{margin-left:auto;font-weight:700;font-size:0.78rem;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,0.03);color:rgba(255,255,255,0.9);border:1px solid rgba(255,255,255,0.02)}
.fusion-card.closed:not(.orb):not(.hud) .small-preview{display:flex}

/* card body & stagger reveal */
.card-body{display:flex;flex-direction:column;gap:12px}
.stagger-item{opacity:0;transform:translateY(15px);transition:opacity 0.4s ease, transform 0.4s var(--ease-overshoot)}
.content-visible .stagger-item{opacity:1;transform:translateY(0)}
.content-visible .stagger-item:nth-child(1){transition-delay:0.1s}
.content-visible .stagger-item:nth-child(2){transition-delay:0.18s}
.content-visible .stagger-item:nth-child(3){transition-delay:0.25s}
.content-visible .stagger-item:nth-child(4){transition-delay:0.30s}

/* ========== INPUTS / TOASTERS / MODALS / PANELS ========== */
.cyber-input{width:100%;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:16px 50px 16px 18px;color:#fff;font-family:var(--font-code);font-size:0.9rem}
.toaster-wrap{position:fixed;right:20px;bottom:20px;z-index:99999;display:flex;flex-direction:column;gap:8px;pointer-events:none}
.toaster{pointer-events:auto;background:linear-gradient(180deg,#0b1220,#071018);border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:10px;box-shadow:0 18px 40px rgba(0,0,0,0.6);font-family:var(--font-ui);font-size:0.95rem;opacity:0;transform:translateY(8px);transition:all 260ms var(--ease-smooth)}
.toaster.show{opacity:1;transform:translateY(0)}
.toaster.error{border-color:var(--neon-danger);color:var(--neon-danger)}
.toaster.success{border-color:var(--neon-success);color:var(--neon-success)}

.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.65);display:none;align-items:center;justify-content:center;z-index:99998;backdrop-filter:blur(8px)}
.keys-card{width:90%;max-width:760px;background:linear-gradient(180deg,#071018,#0b1220);border:1px solid rgba(255,255,255,0.08);padding:20px;border-radius:16px;color:#fff;box-shadow:0 20px 50px rgba(0,0,0,0.8);max-height:90vh;display:flex;flex-direction:column}
.keys-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,0.05)}
.key-list{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:8px;padding-right:6px;min-height:100px}
.key-item{display:flex;align-items:center;gap:8px;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)}
.key-item.active-item{background:rgba(0, 242, 255, 0.05);border-color:rgba(0, 242, 255, 0.2)}
.small-btn{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);padding:6px 10px;border-radius:8px;color:#fff;cursor:pointer;font-size:0.75rem;text-transform:uppercase;font-weight:600;transition:0.2s}
.small-btn:hover{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.2)}
.small-btn.active-btn{background:var(--neon-success);color:#000;border:none}
.danger{color:var(--neon-danger);border-color:rgba(255,42,109,0.3)}
.danger:hover{background:rgba(255,42,109,0.1)}

.form-section{margin-top:15px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.05)}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px}
.form-row{display:flex;gap:8px}
.form-row input, .form-grid input{width:100%;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:#030406;color:#fff;font-family:var(--font-code);font-size:0.85rem}
.form-row input:focus, .form-grid input:focus{border-color:var(--neon-cyan)}

#vaultModal .keys-card{max-width:400px;text-align:center}
.vault-icon{width:50px;height:50px;margin:0 auto 15px;color:var(--neon-purple);background:rgba(189,0,255,0.1);border-radius:50%;display:flex;align-items:center;justify-content:center}

/* ========== CHAT / SVG / PARTICLES / TOP INFO ========== */
#particles-js{position:absolute;inset:0;z-index:12; pointer-events:none}
.svg-container{position:absolute;top:35%;left:50%;transform:translate(-50%,-50%);width:160px;height:160px;z-index:-1; pointer-events:none}
.svg-container object{width:100%;height:100%}
.top-info{position:fixed;top:28px;left:50%;transform:translate(-50%,-50%);z-index:3;background:rgba(0,0,0,0.35);padding:8px 12px;border-radius:12px;font-size:0.69em;backdrop-filter:blur(6px);pointer-events:none}

/* ========== RESPONSE AREA ========== */
.response-container{
  position:fixed; left:20px; right:20px; bottom:160px;
  padding:12px;background:rgba(0,0,0,0.4);backdrop-filter:blur(10px);
  border-radius:20px; max-height:calc(100vh - 220px); overflow-y:auto; -webkit-overflow-scrolling:touch; z-index:1;
}
.page{display:none; opacity:0; transition:opacity 0.8s ease-in-out}
.page.active{display:block; opacity:1}
.page.initial{text-align:center;font-size:1.1em}
.response-controls{display:flex;justify-content:space-between;align-items:center;margin-top:15px;padding-top:10px;border-top:1px solid rgba(255,255,255,0.2)}
.control-buttons{display:flex;gap:10px;align-items:center}
.control-btn{background:rgba(255,255,255,0.05);padding:6px;border-radius:6px;cursor:pointer;transition:background 0.4s;display:flex;gap:6px;border:none;outline:none}
.control-btn:hover{background:rgba(255,255,255,0.12)}
.control-btn svg{stroke:rgba(255,255,255,0.5);fill:none}

/* toggles & pagination */
.toggle-button svg{color:#fff;stroke:rgba(255,255,255,0.3);fill:none; transition: all 0.3s}
.toggle-button.active svg{stroke:var(--neon-success); filter: drop-shadow(0 0 5px var(--neon-success))}
.toggle-button.error svg{stroke:var(--neon-danger); filter: drop-shadow(0 0 5px var(--neon-danger))}
.pagination{display:flex;align-items:center;gap:10px}
.pagination button{background:none;border:none;font-size:1.2em;color:#6fe4fb;cursor:pointer;transition:transform 0.4s}
.pagination button:hover{transform:scale(1.2)}

/* ========== RESPONSE BLOCKS ========== */
.response-block{
  margin:1rem 0;padding:1.2rem;border-radius:12px;
  animation:fadeIn 1.8s ease forwards; transition:box-shadow 0.4s,transform 0.4s;
  line-height:1.5;position:relative;cursor:pointer;overflow:hidden;animation:pulse 6s infinite ease-in-out;
  background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(0,0,0,0.25));
  border: 1px solid rgba(255,255,255,0.03);
}
.response-block h3{margin-bottom:12px}
.response-block:hover{box-shadow:0 0 15px rgba(0,255,255,0.12)}
.response-block .meta{position:absolute;top:8px;right:8px;display:flex;gap:6px}
.crystal-btn{background:rgba(0,0,0,0.25);border-radius:6px;padding:6px;cursor:pointer;border:none;color:var(--neon-cyan)}
.response-block.clicked{animation:clickPulse 0.8s ease-out}
.response-block.expanded{transform:scale(1.03); background:rgba(0,0,0,0.6); z-index:2}
.intro{background:linear-gradient(135deg,rgba(0,255,255,0.08),rgba(0,100,100,0.04));border-left:4px solid #0ff}
.middle{background:linear-gradient(135deg,rgba(255,255,255,0.02),rgba(50,50,50,0.06));border-left:4px solid rgba(255,255,255,0.2)}
.ending{background:linear-gradient(135deg,rgba(255,0,255,0.06),rgba(100,0,100,0.04));border-left:4px solid #f0f}
.footer-text{margin-top:12px;font-size:0.78em;text-align:center;font-style:italic}

/* ========== INPUT CONTAINER (bottom) ========== */
.input-container{position:fixed;left:20px;right:20px;bottom:90px;display:flex;gap:10px;z-index:2;max-width:calc(100% - 40px)}
.input-container input{flex:1;padding:10px;border:none;border-radius:20px;background:rgba(255,255,255,0.1);color:inherit;outline:none;font-size:16px;transition:background 0.4s}
.input-container input:focus{background:rgba(255,255,255,0.2)}
.input-container button{width:60px;height:60px;border:none;border-radius:50%;background:linear-gradient(45deg,#111,#5e5c5e);color:#fff;font-size:1.5em;cursor:pointer;display:flex;justify-content:center;align-items:center;animation:pulse 2s infinite ease-in-out;transition:transform 0.4s}
.input-container button:hover{transform:scale(1.1)}

/* ========== GENERIC MODAL / PANEL / BOX ========== */
.modal, .panel { position: fixed; inset: 0; display: none; z-index: 9998; justify-content:center; align-items:center; }
.modal.active, .panel.active { display:flex }
.box{ background:#1a1a1a;padding:20px;border-radius:12px;border:1px solid rgba(255,255,255,0.06); width:90%;max-width:520px;box-shadow:0 8px 40px rgba(0,0,0,0.6); color:#fff; }
.box h3{color:var(--neon-cyan);margin-bottom:8px}
.row{display:flex;gap:10px;align-items:center}
.col{display:flex;flex-direction:column;gap:8px}
.input-group label{font-size:0.85em;color:#aaa;margin-left:4px}
.input-group input[type="text"], .input-group input[type="password"], .input-group input[type="file"]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:rgba(0,0,0,0.5);color:#fff;outline:none}
.settings-actions{display:flex;gap:10px;margin-top:12px}
.btn{padding:10px;border-radius:8px;border:none;cursor:pointer;font-weight:600}
.btn-prim{background:var(--neon-cyan);color:#000}
.btn-sec{background:rgba(255,255,255,0.08);color:#fff}
.small{font-size:0.85em;color:#bbb}
.crystal-list{max-height:300px;overflow:auto;display:flex;flex-direction:column;gap:8px}
.crystal-item{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;display:flex;justify-content:space-between;gap:8px;align-items:flex-start}
.crystal-item .actions{display:flex;gap:6px}

/* ========== KEYS / DECODER / PULSOS ========== */
#decoderBox{position:fixed;left:50%;top:18%;transform:translateX(-50%);background:rgba(0,0,0,0.8);padding:12px;border-radius:12px;backdrop-filter:blur(6px);z-index:90;display:none}
#decoderBox input{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--text)}
#pulsos-container{position:fixed;left:50%;top:18%;transform:translateX(-50%);max-width:640px;width:78%;z-index:-1;pointer-events:none}
#pulsos{pointer-events:auto;background:rgba(0,0,0,0.45);padding:8px;border-radius:10px;max-height:220px;overflow:auto;color:var(--neon-cyan);font-family:monospace}

/* ========== FOOTER MANTRA & LOCK BUTTON ========== */
#mantra-toggle{
  position:fixed;bottom:54px;left:50%;transform:translateX(-50%);z-index:1;background:rgba(15,15,15,0.4);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.06);padding:3px 8px;border-radius:100px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 40px rgba(0,0,0,0.6);transition:all 0.6s cubic-bezier(0.16, 1, 0.3, 1);min-width:220px;
}
#mantra-toggle:hover{background:rgba(25,25,25,0.9);border-color:rgba(255,255,255,0.15);transform:translateX(-50%) translateY(-2px)}
#mantra-text{font-style:italic;color:#777;font-size:0.78rem;white-space:nowrap;transition:all 0.4s ease}
#mantra-toggle.collapsed{background:transparent;border-color:rgba(255,215,0,0.3);box-shadow:0 0 20px rgba(255,215,0,0.05)}

.lock-button{
  position:fixed;bottom:21px;left:50%;transform:translateX(-50%);width:24px;height:24px;background:transparent;border:1px solid rgba(255,255,255,0.5);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(4px);transition:background 0.3s ease,border-color 0.3s ease;z-index:12;
}
.lock-button:hover{background:rgba(255,255,255,0.1);border-color:rgba(255,255,255,0.8)}

/* zen-mode */
.fade-out{opacity:0;transform:translateY(5px)}
.fade-in{opacity:1;transform:translateY(0)}
body.zen-mode .response-container, body.zen-mode .input-container, body.zen-mode .top-info, body.zen-mode .svg-container{opacity:0;pointer-events:none;filter:blur(12px);transition:all 0.6s ease}

/* ========== SMALL LAYOUT / UTILITIES ========== */
.activation-wrap{display:flex;flex-direction:column;gap:8px}
.activation-card{background:rgba(0,0,0,0.25);border:1px solid rgba(255,255,255,0.04);padding:12px;border-radius:10px;overflow:hidden;transition:all 320ms var(--ease-smooth)}
.activation-pre{font-family:var(--font-code);white-space:pre-wrap;margin:0;padding:8px;background:rgba(0,0,0,0.12);border-radius:8px;border:1px dashed rgba(255,255,255,0.03);color:#fff;font-size:0.75rem}
.activation-hidden{max-height:0;opacity:0;padding:0 12px;pointer-events:none;margin-top:0}
.activation-open{max-height:567px;opacity:1;padding:12px;margin-top:4px}
.activation-toggle{display:flex;align-items:center;justify-content:space-between;padding:8px 4px;cursor:pointer;opacity:0.9;transition:0.2s}
.activation-toggle:hover{opacity:1}
.trigger-btn{width:100%;padding:12px;border:1px dashed rgba(255,255,255,0.1);border-radius:12px;background:rgba(255,255,255,0.02);color:rgba(255,255,255,0.5);font-size:0.75rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;display:flex;justify-content:center;align-items:center;gap:8px;transition:0.2s}
.trigger-btn:hover{background:rgba(255,255,255,0.04);color:#fff;border-color:rgba(255,255,255,0.3)}
.mode-btn{background:rgba(0,242,255,0.05);border-color:rgba(0,242,255,0.2);color:var(--neon-cyan)}
.mode-btn:hover{background:rgba(0,242,255,0.15);box-shadow:0 0 15px rgba(0,242,255,0.1)}
.mode-btn.active-mode{background:var(--neon-cyan);color:#000;box-shadow:0 0 20px rgba(0,242,255,0.4);border-color:transparent}

/* stats, progress, symbolbar, list-beauty, ascii */
.stats-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-top:10px}
.stat-box{background:rgba(255,255,255,0.03);border-radius:12px;padding:10px;text-align:center}
.stat-lbl{font-size:0.55rem;text-transform:uppercase;color:rgba(255,255,255,0.4);display:block;margin-bottom:4px}
.stat-val{font-family:var(--font-code);font-size:0.9rem;font-weight:700;color:var(--neon-cyan)}

.progress-container{background:rgba(0,0,0,0.2);padding:12px;border-radius:12px}
.bar-track{height:4px;background:rgba(255,255,255,0.1);border-radius:2px;overflow:hidden;margin:8px 0}
.bar-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--neon-cyan),var(--neon-purple));box-shadow:0 0 10px var(--neon-cyan);transition:width 1.2s ease-out}
.bar-meta{display:flex;justify-content:space-between;font-size:0.6rem;color:rgba(255,255,255,0.4);font-family:var(--font-code)}

/* symbolbar / controls / iframe area */
/*.wrap{width:100%;height:100%;position:relative;overflow:auto;display:flex;flex-direction:column}
.content{flex:1;position:relative;display:flex}
iframe#frame{width:100%;height:100%;border:0;transition:opacity .4s;opacity:1}
.symbol-bar{position:fixed;right:8px;top:33%;
  display:none;flex-direction:column;gap:10px;z-index:60}
.symbol-button{width:28px;height:28px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:var(--card-bg);color:var(--text);display:flex;align-items:center;justify-content:center;cursor:pointer;backdrop-filter:blur(6px)}
.symbol-button:hover{transform:scale(1.06);box-shadow:0 6px 18px rgba(0,0,0,0.4)}
.controls{position:fixed;left:16px;top:120px;display:none;flex-direction:column;gap:10px;z-index:60}
.btn{padding:8px 10px;border-radius:8px;background:var(--glass);border:1px solid rgba(255,255,255,0.06);cursor:pointer;color:var(--text)}
#decoderBox{display:none} */
.wrap{width:100%;min-height:100vh;height:100%;position:relative;overflow:auto;display:flex;flex-direction:column}
.content{flex:1;position:relative;display:flex}
iframe#frame{width:100%;min-height:100vh;height:100%;border:0;transition:opacity .4s;opacity:1}

/* footer / pulsos / responsive */
.footer{position:fixed;left:20px;right:20px;bottom:12px;text-align:center;z-index:60;color:rgba(215,215,215,0.7);font-size:0.9em}
@media (max-width:600px){
  .symbol-bar{right:9px;top:56%}
  .controls{left:8px;top:90px}
  #pulsos{max-height:140px}
  .form-grid{grid-template-columns:1fr}
  .keys-card{padding:15px}
  .key-item{flex-direction:column;align-items:flex-start}
  .key-item .actions{width:100%;display:flex;justify-content:flex-end;margin-top:8px}
  .box{max-width:92%}
  .svg-container{width:120px;height:120px}
}

/* ========== TEXT BEAUTY PATCH (V3) ========== */
.flow-text p{ text-wrap: pretty; line-height:1.65; letter-spacing:.01em; margin:.65rem 0; hyphens:auto }
.flow-text .kv-head{ font-weight:800; letter-spacing:.02em; margin:1.2rem 0 .4rem }
.span-paren{ padding:.05rem .35rem; border-radius:.55rem; border:1px solid color-mix(in oklab, var(--ink) 16%, transparent); color: color-mix(in oklab, var(--ink) 92%, white); background: color-mix(in oklab, var(--txt-card) 86%, transparent) }
.chip, .chip-btn{ display:inline-grid; place-items:center; padding:.25rem .6rem; border-radius:999px; background:var(--chip-bg); color:#000; font-weight:700; letter-spacing:.02em; box-shadow:0 2px 10px rgba(0,0,0,.35); cursor:pointer; user-select:none }
.q-card{ background: var(--txt-card); border:1px solid color-mix(in oklab, var(--ink) 16%, transparent); box-shadow: 0 6px 24px rgba(0,0,0,.25), inset 0 0 0 1px color-mix(in oklab, var(--ink) 16%, transparent); border-radius:14px; padding:.85rem 1rem; margin:.9rem 0; display:grid; grid-template-columns:auto 1fr; gap:.65rem; align-items:start }
.q-card .q-ico{ inline-size:1.65rem; block-size:1.65rem; border-radius:50%; display:grid; place-items:center; font-weight:800; color:#000; background:var(--chip-bg) }
.q-card .q-body{ line-height:1.55 }
.list-card{ position:relative }
.list-card .copy-badge{ position:absolute; top:.35rem; right:.35rem; font-size:.8rem; padding:.2rem .45rem; border-radius:999px; background: color-mix(in oklab, #fff 12%, var(--txt-card)); border:1px solid color-mix(in oklab, var(--ink) 16%, transparent); color: var(--ink); opacity:.65; transition:.2s; user-select:none }
.list-card:hover .copy-badge{ opacity:1 }
.raw-html-card{ background: var(--txt-card); border:1px dashed color-mix(in oklab, var(--ink) 16%, transparent); border-radius:14px; padding:.85rem 1rem; margin:.9rem 0 }
.raw-html-card .raw-note{ color: color-mix(in oklab, var(--ink) 62%, transparent); font-size:.85em; margin-bottom:.35rem }

/* ========== LIST BEAUTY V2 ========= */
.list-card{ background:var(--list-bg, color-mix(in oklab, var(--panel) 90%, black)); border-radius:var(--list-radius, 16px); box-shadow:var(--list-shadow, 0 6px 24px rgba(0,0,0,.25), inset 0 0 0 1px color-mix(in oklab, var(--ink) 16%, transparent)); border:1px solid var(--list-border, color-mix(in oklab, var(--ink) 16%, transparent)); padding:clamp(.6rem,.9rem,1rem); margin:.85rem 0; }
.list-card ul, .list-card ol{ margin:.25rem 0; padding:0; list-style:none; }
.list-card li{ display:grid; grid-template-columns:auto 1fr; gap:.65rem; align-items:start; padding:.35rem .25rem; }
.list-card li > ul, .list-card li > ol{ margin-top:.35rem; margin-left:1.85rem; }

/* OL numbering */
.list-card ol.ol-neo{ counter-reset:item; }
.list-card ol.ol-neo li{ counter-increment:item; }
.list-card ol.ol-neo li::before{
  content:counters(item, ".");
  inline-size:auto; min-inline-size: var(--list-marker-size, 1.65rem);
  block-size: var(--list-marker-size, 1.65rem);
  padding:0 .55rem; display:grid; place-items:center;
  font-weight:700; font-variant-numeric: tabular-nums;
  border-radius:12px;
  background:linear-gradient(42deg, var(--grad-a), var(--grad-b));
  color:#000; box-shadow:0 2px 10px rgba(0,0,0,.35);
}
.list-card ol.ol-neo ol{ counter-reset:item; }

/* UL diamonds & dash capsule */
.list-card ul.ul-neo:not(.style-dash):not([data-bullet="dash"]) > li::before{
  content:"";
  inline-size:.9rem; block-size:.9rem; border-radius:8px;
  background:linear-gradient(42deg, var(--grad-a), var(--grad-b));
  box-shadow:0 1px 6px rgba(0,0,0,.35), 0 0 0 1px color-mix(in oklab, #fff 14%, transparent);
  translate:0 .15rem;
}
.list-card ul.ul-neo.style-dash > li::before,
.list-card ul.ul-neo[data-bullet="dash"] > li::before{
  content: attr(data-marker, "â€“");
  display:inline-grid; place-items:center;
  inline-size:auto; min-inline-size:1.35rem; block-size:1.35rem;
  padding:0 .6rem; border-radius:999px; font-weight:700; letter-spacing:.02em;
  background:linear-gradient(42deg, var(--grad-a), var(--grad-b)); color:#000; box-shadow:0 2px 10px rgba(0,0,0,.35);
}

/* ascii card */
.ascii-card{ background:var(--list-bg); border-radius:calc(var(--list-radius, 16px) + 2px); border:1px solid var(--list-border); box-shadow:var(--list-shadow), 0 0 0 1px color-mix(in oklab, var(--grad-b) 20%, transparent); margin:1rem 0; overflow:auto; }
.ascii-card pre{ margin:0; padding:1rem 1.1rem; line-height:1.35; font:500 13.5px/1.35 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; white-space:pre; tab-size:2; }
.ascii-card .ascii-cap{ padding:.55rem .9rem .6rem; border-top:1px dashed var(--list-border); color:var(--list-muted, color-mix(in oklab, var(--ink) 62%, transparent)); font-size:.85em; }